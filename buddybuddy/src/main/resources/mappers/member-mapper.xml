<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="memberMapper">

	<resultMap type="Member" id="member_rm">
		<id property="memberNo" column="MEMBER_NO" />
		
		
		<result property="memberEmail" column="MEMBER_EMAIL"/>
		<result property="memberPw" column="MEMBER_PW"/>
		<result property="memberNickname" column="MEMBER_NICKNAME"/>
		<result property="memberGrade" column="MEMBER_GRADE"/>
		<result property="memberRegdate" column="MEMBER_REGDATE"/>
		<result property="memberProfile" column="MEMBER_PROFILE"/>
		<result property="memberStatus" column="MEMBER_STATUS"/>
	
	</resultMap>
	
	<!-- 회원가입 -->
	<insert id="signUp" parameterType="Member">
		INSERT INTO MEMBER
		VALUES( SEQ_MNO.NEXTVAL, #{memberEmail}, #{memberPw}, #{memberNickname}, 
		DEFAULT, DEFAULT, '1', DEFAULT )
	</insert>
	
	<!-- id 중복검사 -->
	<select id="idDupCheck" parameterType="string" resultType="_int">
		SELECT COUNT(*) FROM MEMBER
  		WHERE MEMBER_STATUS = 'N'
  		AND MEMBER_EMAIL = #{id}
	</select>
	
	<!-- 로그인 -->
	<select id="login" parameterType="string" resultMap="member_rm">
		SELECT * FROM MEMBER
		WHERE MEMBER_STATUS = 'Y'
		AND MEMBER_EMAIL = #{memberEmail}
	</select>
  
</mapper>