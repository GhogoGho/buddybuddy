<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt"%>


<article class="media">
  <figure class="media-left">
    <p class="image is-64x64">
      <img
        src="https://images.unsplash.com/photo-1627889701110-cc04941c8208?ixid=MnwxMjA3fDB8MHxwcm9maWxlLXBhZ2V8Mnx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60">
    </p>
  </figure>
  <div class="media-content">
    <div class="content">
      <p>
        <strong>Barbara Middleton</strong>
        <br>
        <div id="notice-con">
          나의 무엇인지 나는 불러 오는 토끼, 것은 버리었습니다. 위에 사랑과 어머님, 밤이 걱정도 까닭입니다. 멀리 언덕 별이 마디씩 그리워 때 피어나듯이 듯합니다. 내 그리워 언덕 언덕 피어나듯이 소학교 릴케 이름과, 못 거외다. 패, 이런 별 이름을 묻힌 속의 있습니다.
        </div>
        <br>
        <small>
          <a>
            <button class="button is-success is-small is-rounded">수정</button>
          </a>
          <a><button class="button is-danger is-small is-rounded">삭제</button>
          </a>
          0000년 00월 00일 00:00
        </small>
      </p>
    </div>

    <article class="media">
      <figure class="media-left">
        <p class="image is-48x48">
          <img
            src="https://images.unsplash.com/photo-1627828940313-e62fee6fd02d?ixid=MnwxMjA3fDB8MHxwcm9maWxlLXBhZ2V8Nnx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60">
        </p>
      </figure>
      <div class="media-content">
        <div class="content">
          <p>
            <strong>Sean Brown</strong>
            <br>
            <div id="notice-con">
              언덕 다 새겨지는 프랑시스 하늘에는 있습니다. 아름다운 묻힌 어머니, 것은 이름과, 버리었습니다. 이제 밤이 그리워 별 써 이네들은 그리고 계절이 계십니다. 같이 가난한 마리아 잔디가 쓸쓸함과 계십니다. 새겨지는 오면 별 이름과, 마디씩 있습니다.
            </div>
            <br>
            <small>
              <a>
                <button class="button is-success is-small is-rounded">수정</button>
              </a>
              <a><button class="button is-danger is-small is-rounded">삭제</button>
              </a>
              0000년 00월 00일 00:00
            </small>
          </p>
        </div>

        <article class="media">
          이상은 청춘을 청춘의 인도하겠다는 인생의 때에, 것이다. 가치를 커다란 품었기 속잎나고, 그러므로 피에 있으랴? 눈이 길지 꽃 충분히 남는 듣기만 끝까지 운다.
        </article>

        <article class="media">
          풀이 피부가 그들의 품에 길을 새 만물은 듣는다. 싸인 우리 청춘을 얼마나 쓸쓸하랴? 고동을 바이며, 얼마나 무엇을 위하여서 바로 간에 그들을 모래뿐일 아니다. 이상의 가는 얼음에 그들은 청춘 그러므로 듣는다.
        </article>
      </div>
    </article>

    <article class="media">
      <figure class="media-left">
        <p class="image is-48x48">
          <img
            src="https://images.unsplash.com/photo-1627828939428-66f34bdf3bbf?ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHwyMDF8fHxlbnwwfHx8fA%3D%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60">
        </p>
      </figure>
      <div class="media-content">
        <div class="content">
          <p>
            <strong>Kayli Eunice </strong>
            <br>
            <div id="notice-con">
              이런 어머니 이국 다 벌레는 아이들의 봅니다. 위에도 피어나듯이 흙으로 밤이 벌레는 자랑처럼 아직 있습니다. 시와 별에도 나의 책상을 하나에 라이너 거외다. 했던 아무 지나가는 계십니다. 다 이름자 너무나 오는 듯합니다. 이름과 쉬이 이름자를 아침이 써 나는 이런 속의 있습니다. 마디씩 애기 멀듯이, 새겨지는 까닭입니다.
            </div>
            <br>
            <small>
              <a>
                <button class="button is-success is-small is-rounded">수정</button>
              </a>
              <a><button class="button is-danger is-small is-rounded">삭제</button>
              </a>
              0000년 00월 00일 00:00
            </small>
          </p>
        </div>
      </div>
    </article>
  </div>
</article>

<article class="media">
  <figure class="media-left">
    <p class="image is-64x64">
      <img src="https://bulma.io/images/placeholders/128x128.png">
    </p>
  </figure>
  <div class="media-content">
    <div class="field">
      <p class="control">
        <textarea class="textarea" placeholder="수강후기를 작성해 주세요."></textarea>
      </p>
    </div>
    <div class="field">
      <p class="control">
        <button class="button is-success is-medium">작성</button>
      </p>
    </div>
  </div>
</article>

		

<script>
/* const loginMemberNo = "${loginMember.memberNo}";
const classNo = ${online.classNo}; */

let beforeReplyRow; 
//-----------------------------------------------------------------------------------------
//수강문의 등록
function addReply() {
	const replyContent = $("#replyContent").val();
    if(loginMemberNo == ""){
    	swal("로그인 후 이용해 주세요.");
    }else{
     if(replyContent.trim() == ""){ 
       swal("수강문의 작성 후 클릭해 주세요.");
     }else{
    	 
       $.ajax({ 
         url : "${contextPath}/onReply/insertReply", 
         type : "POST",
         data : {"memberNo" : loginMemberNo,
             "classNo" : classNo,
             "replyContent" : replyContent },
         success : function(result){
           if(result > 0){ 
        	 		swal({"icon" : "success" ,"title" : "수강문의 등록 성공"});
             $("#replyContent").val(""); 
             
             selectReplyList(); 
           }
         },
         error : function(){
           console.log("수강문의 등록 실패");
         }
       });
     }
  }
} 
//-----------------------------------------------------------------------------------------
//해당 게시글 수강문의 목록 조회
function selectReplyList(){
    $.ajax({ 
     url : "${contextPath}/onReply/list",
     data : {"classNo" : classNo},
     type : "POST",
     dataType : "JSON",  
     success : function(rList){
       
            $("#replyListArea").html(""); 
            
            
            $.each(rList, function(index, item){
           
       
     },
     
     error : function(){
       console.log("댓글 목록 조회 실패");
     }
     
    });
}
// ---------------------------
// 수강문의 수정창 여닫
$(document).on("click", ".showUpdateReply", function(){ // 동적 요소가 적용된 후에도 동작함
	


}); 
// ---------------------------
// 수강문의 수정 기능
function updateReply(replyNo, el){
	
	const replyContent = $(el).prev().val();
	
	$.ajax({
		url : "${contextPath}/onReply/updateReply",
		type : "POST",
		data : {"replyNo" : replyNo,
				"replyContent" : replyContent},
		success : function(result){
			if(result > 0 ){
				swal({"icon" : "success" , "title" : "수강문의 수정 성공"});
				selectReplyList();
			}
		},
		error : function(){
			console.log("수강문의 수정 실패");
		}
	});
}
// ---------------------------
// 수강문의 삭제 기능
function deleteReply(replyNo){
	if(confirm("수강문의를 삭제하시겠습니까?")){
  		
        $.ajax({
          url :"${contextPath}/onReply/deleteReply",
          type : "POST",
          data : {"replyNo" : replyNo},
          success : function(result){
            if(result > 0){
            	swal({"icon" : "success" , "title" : "수강문의 삭제 성공"});
              selectReplyList();
            }
          },
          error : function(){
            console.log("수강문의 삭제 실패");
          }
    	});
	}
}


</script>

